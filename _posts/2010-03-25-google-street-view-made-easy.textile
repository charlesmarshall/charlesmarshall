---
layout: default
title: Google Street View Made Easy
category: web
keywords:
- web
- google
- maps
- google maps
- street view
- google maps street view
- javascript
- prototype
- jquery
- simple
- extension
description: ""
introduction: "<p>work in progress</p>"
---

Street view is one the most outstanding features of not just google maps, but any google project. Just think how many photos are needed, and then how do you stitch them together?

Then you have to blur peoples faces, watch out for public displays of nudity and a whole bunch of other checks.

Unsurprisingly enough getting street view on your google map isn't any easy task. It has got a lot better recently, with more functions making life easier but nothing to match to complexity or the features of the main google maps site.

h2. What's Missing

In order to replicate the googles own maps there are certain key features that don't exist by default, so I've had to copy it as close as possible.

h3. The Little Man

The big one, that little man just above the zoom. There simply isn't an API feature for that. This is why you don't see any demos that have that man, it's a Google only interface item.

At a guess, this is a heavily customised GControl with a GMarker mixed in to provide the draggable ability. Not something that can be replicated quickly.

Instead, the comprise is to use a GControl (to find the correct position) and a GMarker (to do all the hard work). The GMarker triggers the turning on of GStreetviewOverlay, loading of the GStreetviewPanorama and a few others.

Although in the "example":#map_street_view the little man never seems to move, but it does. It's position is reset on the map move event.

h3. Closing

One thing you notice when your using the API based street view is the lack of a little x.

Strangely enough, it is on the google maps one. With a bit of backwards engineering that problem was overcome (big thanks to "Sheldon Els":http://sheldon.github.com/ for sorting that part out).

h2. Demo

Enough talk, here is the working demo.

<div class='example' id="map_street_view">
  <div id="gmap" class='gmap'></div>
</div>

It's also easy to use..

h2. Using Street View

To make it easy to use I've made a jQuery plugin wrapper for the custom SVC prototype object (which handles the grunt work).

First and foremost, make sure you are using v2 of google maps API (no street view yet in v3) and a recent version of jQuery. I tend to use google.load() for kind of thing.

<pre>
<script type='text/javascript'>
  google.load('jquery', '1.3');
  google.load('maps', '2', {"other_params":"sensor=true&key=YOUR_GOOGLE_KEY"});
</script>
</pre>

Make sure you have set up your markup to something sensible

<pre>
<div class='example' id="map_street_view">
  <div id="gmap" class='gmap'></div>
</div>
</pre>

As always, style the google map

<pre>
 #gmap{
  width:100%;
  height:350px;
}
</pre>

Make a new instance of a google map

<pre>
<script>
var MAP = new GMap2(document.getElementById("gmap"));
</script>
</pre>

Configure the defaults for map, position, zoom etc.

<pre>
<script>
var latlng = new google.maps.LatLng(52.502625,-1.893997),
    opts = {zoom: 12, center: latlng}
    ;
MAP.setCenter(opts.center, opts.zoom);
MAP.setUIToDefault();
</script>
</pre>

Triggering street view at this point is easy, in fact, it's one line

<pre>
<script>
jQuery('#gmap').streetview({map:MAP, icon_image: "path/to/man-marker"});
</script>
</pre>

All you have to do is pass in the GMap2 you just made and the path to the image file for the man.

h3. Configurable Options

Say you don't want to use the default ids that the plugin makes use of, well thats ok, you can just change them.

These are the default settings:

<pre>
map:false,
icon_image: "street-view.png",
control:false,
selector_ids:{
  map_container:false,
  control_container:"sv_control",
  control_ui:"sv_ui",
  control_text:"sv_text",
  street_view: "gstreetview"
  }
</pre>

What they mean...

* map - this is the GMap2 object
* icon_image - path to the image for the marker
* control - the custom SVC (and extended GControl) object
* selector_ids
  * map_container - auto generated by called map.getContainer().parent
  * control_container - div containing the custom control (if the selector isn't there the markup is inserted)
  * control_ui - part of the custom control
  * control_text - part of the custom control
  * street_view - the container for the street view flash object (if the selector isn't there the markup is inserted)

h3. The Files

All the files that are used...

<div class='file_list clearfix'>
  <ul class="clearfix inline">
    <li class='category'><a href='http://github.com/charlesmarshall/streetview/raw/v2-jquery/streetview.js' title='jQuery and SVC' class='category curvy'>Javascript file &raquo;</a></li>
    <li class='category'><a href='http://github.com/charlesmarshall/streetview/raw/v2-jquery/styles.css' title='Stylesheet' class='category curvy'>CSS file &raquo;</a></li>
    <li class='category'><a href='http://github.com/charlesmarshall/streetview/zipball/v2-jquery' title='Zip of all' class='category curvy'>Zip file of &raquo;</a></li>    
  </ul>
</div>
<!-- WORKING CODE HERE -->
<script type='text/javascript'>
  google.load('maps', '2', {"other_params":"sensor=true&key=ABQIAAAAQ_MbVb_KdIi7Z-3agFFibxTr40-U6rKi3H1zIkD0TDNPyGQE8BRJbeg0G5ZalFKDmIo4Mlkk2y9uyw"});
</script>
<link rel="stylesheet" href="http://github.com/charlesmarshall/streetview/raw/v2-jquery/styles.css" type="text/css" media="screen" charset="utf-8"/>
<script src="http://github.com/charlesmarshall/streetview/raw/v2-jquery/streetview.js" type="text/javascript" charset="utf-8"></script>
<script>
var latlng = new google.maps.LatLng(52.502625,-1.893997),
    opts = {zoom: 12, center: latlng},
    MAP = new GMap2(document.getElementById("gmap"))
    ;
MAP.setCenter(opts.center, opts.zoom);
MAP.setUIToDefault();
jQuery('#gmap').streetview({map:MAP, icon_image: "http://github.com/charlesmarshall/streetview/raw/v2-jquery/street-view.png"});
</script>